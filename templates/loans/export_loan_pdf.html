<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<style>
    body {
        font-family: Arial, sans-serif;
        font-size: 10px;
    }

    table {
        border-collapse: collapse; /* Remove double borders */
        width: 100%;
        margin-bottom: 15px;
        border: 1px solid black; /* Outer border */
    }

    thead, tbody, tr, th, td {
        border: none; /* Remove all inner borders */
    }

    th, td {
        padding: 3px 5px;
        text-align: left;
        background-color: #fff; /* or transparent */
    }

    thead th {
        font-weight: bold;
        background-color: #f0f0f0; /* optional subtle header bg */
    }

    /* Optional: for multiple tables */
    table.outer-border-only {
        border: 1px solid black;
    }

    .header-container {
        text-align: center;
        font-weight: bold;
    }

    .company-info {
        font-size: 18px;
        text-transform: uppercase;
    }
</style>
</head>
<body>

<!-- Header with logo and details -->
<div class="header-container" style="text-align: center; font-weight: bold;">
    <div class="company-info" style="font-size: 18px; text-transform: uppercase;">
        {{ company.name }}
    </div>
    <div style="font-size: 14px; margin-top: 5px;">
        Email: {{ company.email or 'N/A' }} | Phone: {{ company.phone or 'N/A' }}<br>
        Address: {{ company.address or 'N/A' }}
    </div>
    <p style="margin-top: 10px; font-size: 16px;"><strong>Client Ledger Entries & Statement</strong></p>
</div>

    <hr>

<!-- Loan Details Table -->
<table class="no-inner-borders">
    <tr>
        <th>Borrower Name</th>
        <td>{{ loan.borrower_name }}</td>
        <th>Loan ID</th>
        <td>{{ loan.loan_id }}</td>
    </tr>
    <tr>
        <th>Principal</th>
        <td>{{ "{:,.2f}".format(loan.amount_borrowed or 0) }}</td>
        <th>Interest Rate</th>
        <td>{{ loan.interest_rate }}%</td>
    </tr>
    <tr>
        <th>Total Due</th>
        <td>{{ "{:,.2f}".format(loan.total_due or 0) }}</td>
        <th>Cumulative Interest Added</th>
        <td>{{ "{:,.2f}".format(loan.cumulative_interest or 0) }}</td>
    </tr>
    <tr>
        <th>Repaid Amount</th>
        <td>{{ "{:,.2f}".format(loan.amount_paid or 0) }}</td>
        <th>Outstanding Balance</th>
        <td>{{ "{:,.2f}".format(loan.remaining_balance or 0) }}</td>
    </tr>
</table>

<!-- Repayments Table -->
<table class="repayments-table">
    <thead>
        <tr>
            <th>Entry ID</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Principal</th>
            <th>Interest</th>
            <th>Cumulative Interest</th>
            <th>Particulars</th>
            <th>Outstanding Balance</th>
        </tr>
    </thead>

    <tbody>
        {% for entry in ledger_entries %}
        <tr>
            <td>{{ entry.id }}</td>
            <td>{{ entry.date.strftime('%b %d, %Y') }}</td>

            <!-- RAW USER / SYSTEM AMOUNT -->
            <td>{{ "{:,.2f}".format(entry.amount or 0) }}</td>

            <!-- ALLOCATIONS -->
            <td>{{ "{:,.2f}".format(entry.principal or 0) }}</td>
            <td>{{ "{:,.2f}".format(entry.interest or 0) }}</td>
            <td>{{ "{:,.2f}".format(entry.cumulative_interest or 0) }}</td>

            <td>{{ entry.particulars }}</td>

            <!-- RUNNING BALANCE -->
            <td>{{ "{:,.2f}".format(entry.running_balance or 0) }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>
