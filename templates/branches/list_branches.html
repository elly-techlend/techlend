{% extends 'base.html' %}

{% block content %}
  <h1>Your Branches</h1>
  <a href="{{ url_for('branches.add_branch') }}" class="btn btn-primary mb-3">Add a New Branch</a>

  {% if branches %}
    <!-- Table for medium and larger screens -->
    <div class="table-responsive d-none d-md-block">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Branch Name</th>
            <th scope="col">Location</th>
            <th scope="col">Address</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for branch in branches %}
            <tr>
              <td>{{ branch.name }}</td>
              <td>{{ branch.location }}</td>
              <td>{{ branch.address }}</td>
              <td>{{ branch.phone_number }}</td>
              <td>
                <a href="{{ url_for('branches.view_branch', branch_id=branch.id) }}" class="btn btn-sm btn-outline-primary mb-1">View</a>
                <a href="{{ url_for('branches.update_branch', branch_id=branch.id) }}" class="btn btn-sm btn-outline-secondary mb-1">Edit</a>
                <form action="{{ url_for('branches.delete_branch', branch_id=branch.id) }}" method="POST" style="display:inline;">
                  <button type="submit" onclick="return confirm('Are you sure you want to delete this branch?');" class="btn btn-sm btn-outline-danger mb-1">Delete</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Card list for small and extra small screens -->
    <div class="d-md-none">
      {% for branch in branches %}
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">{{ branch.name }}</h5>
            <p class="card-text mb-1"><strong>Location:</strong> {{ branch.location or 'N/A' }}</p>
            <p class="card-text mb-1"><strong>Address:</strong> {{ branch.address or 'N/A' }}</p>
            <p class="card-text mb-2"><strong>Phone:</strong> {{ branch.phone_number or 'N/A' }}</p>

            <a href="{{ url_for('branches.view_branch', branch_id=branch.id) }}" class="btn btn-sm btn-outline-primary me-1 mb-1">View</a>
            <a href="{{ url_for('branches.update_branch', branch_id=branch.id) }}" class="btn btn-sm btn-outline-secondary me-1 mb-1">Edit</a>

            <form action="{{ url_for('branches.delete_branch', branch_id=branch.id) }}" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Are you sure you want to delete this branch?');" class="btn btn-sm btn-outline-danger mb-1">Delete</button>
            </form>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No branches found. <a href="{{ url_for('branches.add_branch') }}">Add a new branch</a></p>
  {% endif %}
{% endblock %}
